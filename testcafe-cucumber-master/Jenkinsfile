pipeline {
  agent any
 
  //tools {nodejs "recent_node"}
 
  stages {  
    stage('Clonning Git') {
        steps {
            git 'https://github.com/ivan-molina/TFM_CUCUMBER.git'
        }
    }
    
    stage('Install dependencies') {
        steps {
            bat 'cd testcafe-cucumber-master'
            bat 'npm install'
            bat 'npm install TestCafe'
            bat 'npm install cucumber-html-reporter --save-dev'
            bat 'npm i gherkin-testcafe cucumber'

        }
    }

    stage('Execute test') {
        steps {
            bat 'npm run test-chrome'
        }
    }

    stage('Publish reports') {
        steps {
            bat 'dir'
        }
    }    
    
  }
}