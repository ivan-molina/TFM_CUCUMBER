pipeline {
  agent any
 
  //tools {nodejs "recent_node"}
 
  stages {  
    stage('Clonning Git') {
        steps {
            git 'https://github.com/ivan-molina/TFM_CUCUMBER.git'
        }
    }
    
    stage('Install dependencies') {
        steps {
            bat '''
                echo '------------Install dependencies--------------'
                'cd testcafe-cucumber-master'
                'npm install'
                'npm install testcafe'
                'npm i gherkin-testcafe cucumber'
                'npm install cucumber-html-reporter --save-dev'
            '''
        }
    }

    stage('Execute test') {
        steps {
            bat '''
                echo '------------Execute test--------------'
                'cd testcafe-cucumber-master'
                'npm run test-chrome'
            '''
        }
    }

    stage('Publish reports') {
        steps {
            bat 'dir'
        }
    }    
    
  }
}